<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="viewport" content="width=device-width,height=device-height,initial-scale=1.0,  shrink-to-fit=no"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    <div class="border-down">
        <div class="container pd-60">
            <div class="row w-100 mx-0 py-3">
                <div class="col-lg-4 my-auto">
                    <p class="subTitleNav">StockCheck</p>
                </div>
                <div class="col-lg-4 d-flex justify-content-center my-auto">
                    <a href="/" class="navbarHTLink mr main-navbar-link">Add Item</a>
                    <a href="/edit" class="navbarHTLink  main-navbar-link">Edit Stock</a>
                    <a href="/dash/{{refId}}" target="_blank" class="navbarHTLink ml main-navbar-link">Live Page</a>
                </div>
                <div class="col-lg-4 my-auto d-flex align-items-center justify-content-end">
                    <a class="navbarHTLink2"> Welcome back <span class="navbarHTLink3">{{name}}</span></a>
                    <a href="/logout" class="buttonLogout">Logout</a>
                </div>
            </div>
        </div>
    </div>
    <div class="container pd-60">
        <div class="row">
            <div class="col-lg-12">
                <div class="putainEdit">
                    <div class="row">
                        <div class="col-lg-12 mb-1">
                            <h1 class="title text-right">Edit Product</h1>    
                            <hr class="divider ">
                        </div>
                    </div>                        
                    <form method="POST" id="back">
                        <div class="row">
                            <div class="col-lg-6">
                                <img src="{{product_image}}" class="imgShow" >
                            </div>
                            <div class="col-lg-6">
                                <div class="col-lg-12">
                                    <label class="subTitle" for="product_name">Product Name</label>
                                    <input type="text" class="mt-2 formInput" placeholder="{{product_name}}" value="{{product_name}}" id="product_name" >
                                </div>
                                <div class="col-lg-12 mt-4">
                                    <label class="subTitle" for="product_sku">Product Sku</label>
                                    <input type="text" class="mt-2 formInput" placeholder="{{product_sku}}" value="{{product_sku}}" id="product_sku">
                                </div>
                                <div class="col-lg-12 mt-4">
                                    <label class="subTitle" for="product_link">Product Link Image</label>
                                    <input type="text" class="mt-2 formInput" placeholder="{{product_image}}" value="{{product_image}}" id="product_image"> 
                                </div>
                                <div class="col-lg-12 mt-4">  
                                    <label class="subTitle" for="product_sizes">Sizes List</label>
                                    <input type="text" class="mt-2 formInput" placeholder="Insert sizes here" value="{{product_sizes}}" id="product_sizes">
                                </div>
                            </div>
                            <div class="col-lg-12">
                                <hr class="divider mt-4">
                                <button type="submit" class="buttonEdit">Confirm Edits</button>
                            </div>
                        </div>
                    </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const form = document.getElementById('back')
        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            const product_name = document.getElementById('product_name').value;
            const product_sku = document.getElementById('product_sku').value;
            const product_image = document.getElementById('product_image').value;
            const product_sizes = document.getElementById('product_sizes').value;
            const data = {
                product_name,
                product_sku,
                product_image,
                product_sizes
            }
            console.log(data, "ciao")
            fetch('/edit', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            })
            .then(res => res.json())
            .then(data => {
                console.log(data);
            })
            window.location.pathname = "/edit";
        })
    </script>
</body>
</html>